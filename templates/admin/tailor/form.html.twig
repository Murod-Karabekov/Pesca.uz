{% extends 'admin/base.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block admin_body %}
<div class="mb-8">
    <a href="{{ path('admin_tailor_index') }}" class="inline-flex items-center gap-2 text-sm text-brand-medium hover:text-peach-600 transition-colors mb-4">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
        Tikuvchilarga qaytish
    </a>
    <h1 class="text-2xl md:text-3xl font-display font-bold text-brand-dark">{{ title }}</h1>
</div>

<div class="card p-6 md:p-8 max-w-2xl">
    {{ form_start(form, {'attr': {'class': 'space-y-6', 'novalidate': 'novalidate', 'enctype': 'multipart/form-data'}}) }}

    <div>
        {{ form_label(form.name, null, {'label_attr': {'class': 'block text-sm font-medium text-brand-dark mb-2'}}) }}
        {{ form_widget(form.name) }}
        {{ form_errors(form.name) }}
    </div>

    <div>
        {{ form_label(form.description, null, {'label_attr': {'class': 'block text-sm font-medium text-brand-dark mb-2'}}) }}
        {{ form_widget(form.description) }}
        {{ form_errors(form.description) }}
    </div>

    <div>
        {{ form_label(form.price, null, {'label_attr': {'class': 'block text-sm font-medium text-brand-dark mb-2'}}) }}
        {{ form_widget(form.price) }}
        {{ form_errors(form.price) }}
    </div>

    <div>
        {{ form_label(form.imageFile, null, {'label_attr': {'class': 'block text-sm font-medium text-brand-dark mb-2'}}) }}
        {% if tailor.imageSrc %}
            <div class="mb-3">
                <img src="{{ tailor.imageSrc }}" alt="Current" class="w-24 h-24 object-cover rounded-full">
                {% if tailor.isExternalImage %}
                    <p class="text-xs text-brand-medium mt-1">Tashqi havola orqali</p>
                {% endif %}
            </div>
        {% endif %}
        {{ form_widget(form.imageFile) }}
        {{ form_errors(form.imageFile) }}
    </div>

    <div>
        {{ form_label(form.imageUrl, null, {'label_attr': {'class': 'block text-sm font-medium text-brand-dark mb-2'}}) }}
        {{ form_widget(form.imageUrl) }}
        {{ form_errors(form.imageUrl) }}
        <p class="text-xs text-brand-medium mt-1">Rasm havolasini kiritish fayl yuklashdan ustun turadi. VDS'da joy tejaydi.</p>
    </div>

    <div class="flex gap-3 pt-4">
        <button type="submit" class="btn-primary">Tikuvchini saqlash</button>
        <a href="{{ path('admin_tailor_index') }}" class="btn-secondary">Bekor qilish</a>
    </div>

    {{ form_end(form) }}
</div>
{% endblock %}
